# OLED SSD1306 æ˜¾ç¤ºå±æµ‹è¯•

## ğŸ“‹ æ¨¡å—ä¿¡æ¯

- **æ¨¡å—åç§°**ï¼šOLED SSD1306
- **å°ºå¯¸**ï¼š0.96å¯¸
- **åˆ†è¾¨ç‡**ï¼š128x64åƒç´ 
- **æ¥å£**ï¼šI2C (4é’ˆ)
- **I2Cåœ°å€**ï¼š0x3C (é»˜è®¤)
- **å·¥ä½œç”µå‹**ï¼š3.3V

---

## ğŸ”Œ ç¡¬ä»¶æ¥çº¿

| OLEDå¼•è„š | ESP32å¼•è„š | åŠŸèƒ½è¯´æ˜ |
|----------|----------|---------|
| VCC | 3.3V | ä¾›ç”µï¼ˆâš ï¸ ä¸æ˜¯5Vï¼ï¼‰ |
| GND | GND | åœ° |
| SCL | GPIO22 | I2Cæ—¶é’Ÿçº¿ |
| SDA | GPIO21 | I2Cæ•°æ®çº¿ |

### æ¥çº¿å›¾

```
OLED SSD1306          ESP32
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ VCC      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ 3.3V â”‚  âš ï¸ å¿…é¡»3.3V
â”‚ GND      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ GND  â”‚
â”‚ SCL      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ G22  â”‚  I2Cæ—¶é’Ÿ
â”‚ SDA      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ G21  â”‚  I2Cæ•°æ®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”˜
```

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç”µå‹è­¦å‘Š**ï¼šOLEDå¿…é¡»æ¥3.3Vï¼Œæ¥5Vä¼šçƒ§æ¯ï¼
2. **ä¸Šæ‹‰ç”µé˜»**ï¼šI2Cæ€»çº¿éœ€è¦ä¸Šæ‹‰ç”µé˜»ï¼ˆå¤šæ•°OLEDæ¨¡å—å·²å†…ç½®ï¼‰
3. **è¿æ¥ç‰¢å›º**ï¼šç¡®ä¿æœé‚¦çº¿è¿æ¥ç´§å¯†ï¼Œæ¾åŠ¨ä¼šå¯¼è‡´æ˜¾ç¤ºå¼‚å¸¸
4. **I2Cåœ°å€**ï¼šé»˜è®¤0x3Cï¼Œå¦‚æœä¸å·¥ä½œï¼Œå°è¯•0x3D

---

## ğŸ§ª æµ‹è¯•ç›®æ ‡

æœ¬æµ‹è¯•å°†éªŒè¯ï¼š
- âœ… I2Cé€šä¿¡æ­£å¸¸
- âœ… OLEDå±å¹•èƒ½æ˜¾ç¤ºæ–‡å­—
- âœ… èƒ½æ˜¾ç¤ºå›¾å½¢å’ŒåŠ¨ç”»
- âœ… å¤šé¡µé¢åˆ‡æ¢åŠŸèƒ½

### æµ‹è¯•æ­¥éª¤

1. **æ­¥éª¤1**ï¼šæ˜¾ç¤º"Hello ESP32"
2. **æ­¥éª¤2**ï¼šæ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯ï¼ˆèŠ¯ç‰‡IDã€å†…å­˜ï¼‰
3. **æ­¥éª¤3**ï¼šç»˜åˆ¶å›¾å½¢ï¼ˆçº¿æ¡ã€çŸ©å½¢ã€åœ†å½¢ï¼‰
4. **æ­¥éª¤4**ï¼šæ˜¾ç¤ºæ»šåŠ¨æ–‡å­—
5. **æ­¥éª¤5**ï¼šé¡µé¢åˆ‡æ¢åŠ¨ç”»

---

## ğŸ› ï¸ ç¼–è¯‘ä¸çƒ§å½•

### æ–¹æ³•1ï¼šä½¿ç”¨VS Code (æ¨è)

1. æ‰“å¼€æœ¬æ–‡ä»¶å¤¹ï¼š
   ```
   æ–‡ä»¶ â†’ æ‰“å¼€æ–‡ä»¶å¤¹ â†’ é€‰æ‹© 01_OLED_Test
   ```

2. é…ç½®ä¸²å£å’Œç›®æ ‡ï¼š
   - ç‚¹å‡»åº•éƒ¨çŠ¶æ€æ çš„ ğŸ”Œ å›¾æ ‡ â†’ é€‰æ‹©COMå£ï¼ˆå¦‚COM3ï¼‰
   - ç‚¹å‡» ğŸ¯ å›¾æ ‡ â†’ é€‰æ‹© ESP32

3. ç¼–è¯‘é¡¹ç›®ï¼š
   - ç‚¹å‡»åº•éƒ¨ ğŸ”¨ "Build" å›¾æ ‡
   - æˆ–æŒ‰å¿«æ·é”®ï¼š`Ctrl+E` â†’ `B`

4. çƒ§å½•å›ºä»¶ï¼š
   - ç‚¹å‡»åº•éƒ¨ âš¡ "Flash" å›¾æ ‡
   - æˆ–æŒ‰å¿«æ·é”®ï¼š`Ctrl+E` â†’ `F`

5. æŸ¥çœ‹ä¸²å£è¾“å‡ºï¼š
   - ç‚¹å‡»åº•éƒ¨ ğŸ“º "Monitor" å›¾æ ‡
   - æˆ–æŒ‰å¿«æ·é”®ï¼š`Ctrl+E` â†’ `M`

### æ–¹æ³•2ï¼šä½¿ç”¨å‘½ä»¤è¡Œ

æ‰“å¼€ "ESP-IDF 5.1 CMD" æˆ–VS Codeç»ˆç«¯ï¼š

```powershell
# è¿›å…¥æµ‹è¯•ç›®å½•
cd test_modules\01_OLED_Test

# è®¾ç½®ç›®æ ‡èŠ¯ç‰‡ï¼ˆé¦–æ¬¡éœ€è¦ï¼‰
idf.py set-target esp32

# ç¼–è¯‘
idf.py build

# çƒ§å½•ï¼ˆæ›¿æ¢COM3ä¸ºä½ çš„ç«¯å£ï¼‰
idf.py -p COM3 flash

# æŸ¥çœ‹è¾“å‡º
idf.py -p COM3 monitor

# ä¸€é”®å®Œæˆï¼ˆç¼–è¯‘+çƒ§å½•+ç›‘è§†ï¼‰
idf.py -p COM3 flash monitor
```

**é€€å‡ºç›‘è§†å™¨**ï¼šæŒ‰ `Ctrl+]`

---

## ğŸ“Š é¢„æœŸç»“æœ

### ä¸²å£è¾“å‡º

```
I (312) OLED_TEST: ========================================
I (322) OLED_TEST: ESP32 OLED SSD1306 æµ‹è¯•ç¨‹åº
I (322) OLED_TEST: ========================================

I (332) OLED_TEST: [1] åˆå§‹åŒ–I2Cæ€»çº¿...
I (342) OLED_TEST: âœ“ I2Cåˆå§‹åŒ–æˆåŠŸ

I (342) OLED_TEST: [2] æ‰«æI2Cè®¾å¤‡...
I (352) OLED_TEST: æ‰¾åˆ°I2Cè®¾å¤‡ï¼Œåœ°å€: 0x3C
I (362) OLED_TEST: âœ“ OLEDå±å¹•æ£€æµ‹æˆåŠŸ

I (372) OLED_TEST: [3] åˆå§‹åŒ–OLEDæ˜¾ç¤º...
I (482) OLED_TEST: âœ“ OLEDåˆå§‹åŒ–æˆåŠŸ

I (492) OLED_TEST: [4] æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯...
I (592) OLED_TEST: âœ“ æ˜¾ç¤ºå®Œæˆ

I (3592) OLED_TEST: [5] æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯...
I (3692) OLED_TEST:   - èŠ¯ç‰‡å‹å·: ESP32-D0WDQ6
I (3692) OLED_TEST:   - CPUé¢‘ç‡: 160 MHz
I (3702) OLED_TEST:   - å¯ç”¨å†…å­˜: 276 KB
I (3702) OLED_TEST: âœ“ ç³»ç»Ÿä¿¡æ¯æ˜¾ç¤ºå®Œæˆ

I (6702) OLED_TEST: [6] ç»˜åˆ¶å›¾å½¢...
I (6802) OLED_TEST: âœ“ å›¾å½¢ç»˜åˆ¶å®Œæˆ

I (9802) OLED_TEST: [7] æ»šåŠ¨æ–‡å­—åŠ¨ç”»...
I (12802) OLED_TEST: âœ“ åŠ¨ç”»å®Œæˆ

I (12802) OLED_TEST: ========================================
I (12812) OLED_TEST: âœ“ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼OLEDå·¥ä½œæ­£å¸¸ï¼
I (12822) OLED_TEST: ========================================
```

### OLEDå±å¹•æ˜¾ç¤º

**é¡µé¢1ï¼šæ¬¢è¿ä¿¡æ¯**ï¼ˆæ˜¾ç¤º3ç§’ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ESP32 OLED Test       â”‚
â”‚â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                        â”‚
â”‚   Hello ESP32!         â”‚
â”‚                        â”‚
â”‚   SSD1306 Working!     â”‚
â”‚                        â”‚
â”‚   I2C @ 0x3C           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¡µé¢2ï¼šç³»ç»Ÿä¿¡æ¯**ï¼ˆæ˜¾ç¤º3ç§’ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  System Info           â”‚
â”‚â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  Chip: ESP32-D0WDQ6    â”‚
â”‚  Cores: 2              â”‚
â”‚  Freq: 160MHz          â”‚
â”‚  RAM: 276KB            â”‚
â”‚  Flash: 4MB            â”‚
â”‚  I2C: OK  SPI: OK      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¡µé¢3ï¼šå›¾å½¢ç»˜åˆ¶**ï¼ˆæ˜¾ç¤º3ç§’ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”    â•”â•â•â•â•â•—   â”‚
â”‚  â”‚      â”‚    â•‘    â•‘   â”‚
â”‚  â”‚ Box  â”‚    â•‘Lineâ•‘   â”‚
â”‚  â”‚      â”‚    â•‘    â•‘   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜    â•šâ•â•â•â•â•   â”‚
â”‚                        â”‚
â”‚    â—‹    â—    â—    â—   â”‚ â† åœ†å½¢
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¡µé¢4ï¼šæ»šåŠ¨æ–‡å­—**ï¼ˆåŠ¨ç”»3ç§’ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OLED Test Passed! >>>  â”‚ â† ä»å³å‘å·¦æ»šåŠ¨
â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚     â”‚ â† è¿›åº¦æ¡åŠ¨ç”»
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚       Loading...       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šä¸²å£è¾“å‡º "OLEDæœªæ£€æµ‹åˆ°" æˆ– "I2Cé”™è¯¯"

**å¯èƒ½åŸå› **ï¼š
1. æ¥çº¿é”™è¯¯
2. OLEDæŸå
3. I2Cåœ°å€é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š

**æ­¥éª¤1**ï¼šæ£€æŸ¥æ¥çº¿
```
å†æ¬¡ç¡®è®¤ï¼š
VCC â†’ 3.3V (ä¸æ˜¯5Vï¼)
GND â†’ GND
SCL â†’ GPIO22
SDA â†’ GPIO21
```

**æ­¥éª¤2**ï¼šæ‰«æI2Cåœ°å€
ä¿®æ”¹ä»£ç ä¸­çš„ `#define OLED_I2C_ADDRESS`ï¼š
```c
// å°è¯•ä¸åŒåœ°å€
#define OLED_I2C_ADDRESS 0x3C  // é»˜è®¤
// #define OLED_I2C_ADDRESS 0x3D  // å¤‡é€‰
```

**æ­¥éª¤3**ï¼šæµ‹è¯•I2Cæ€»çº¿
ä½¿ç”¨i2c_scannerå·¥å…·æ‰«æï¼š
```c
// åœ¨main.cä¸­æ·»åŠ æ‰«æä»£ç ï¼ˆå·²åŒ…å«ï¼‰
esp_err_t i2c_scan() {
    for (uint8_t addr = 1; addr < 127; addr++) {
        i2c_cmd_handle_t cmd = i2c_cmd_link_create();
        i2c_master_start(cmd);
        i2c_master_write_byte(cmd, (addr << 1) | I2C_MASTER_WRITE, true);
        i2c_master_stop(cmd);
        if (i2c_master_cmd_begin(I2C_NUM_0, cmd, 100/portTICK_PERIOD_MS) == ESP_OK) {
            printf("æ‰¾åˆ°I2Cè®¾å¤‡: 0x%02X\n", addr);
        }
        i2c_cmd_link_delete(cmd);
    }
}
```

### é—®é¢˜2ï¼šOLEDæ˜¾ç¤ºä¹±ç æˆ–èŠ±å±

**å¯èƒ½åŸå› **ï¼š
1. æ¥è§¦ä¸è‰¯
2. I2Cé€Ÿåº¦å¤ªå¿«
3. ä¾›ç”µä¸ç¨³å®š

**è§£å†³æ–¹æ¡ˆ**ï¼š

**æ­¥éª¤1**ï¼šé™ä½I2Cé€Ÿåº¦
ä¿®æ”¹ä»£ç ï¼š
```c
// ä»400kHzé™åˆ°100kHz
.master.clk_speed = 100000,  // åŸæ¥æ˜¯400000
```

**æ­¥éª¤2**ï¼šæ£€æŸ¥ä¾›ç”µ
- ç”¨ä¸‡ç”¨è¡¨æµ‹é‡3.3Vå¼•è„šç”µå‹ï¼Œåº”è¯¥åœ¨3.2-3.4Vä¹‹é—´
- å¦‚æœç”µå‹ä½ï¼Œå¯èƒ½æ˜¯å¼€å‘æ¿ç¨³å‹å™¨èƒ½åŠ›ä¸è¶³

**æ­¥éª¤3**ï¼šé‡æ–°åˆå§‹åŒ–
```c
// æ·»åŠ å»¶æ—¶
vTaskDelay(pdMS_TO_TICKS(100));
ssd1306_init(&dev, 128, 64, 0x3C, I2C_NUM_0, GPIO_NUM_21, GPIO_NUM_22);
```

### é—®é¢˜3ï¼šåªæ˜¾ç¤ºå‰å‡ ä¸ªå­—ç¬¦

**å¯èƒ½åŸå› **ï¼š
- å­—ä½“æ–‡ä»¶ç¼ºå¤±
- å†…å­˜ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**ï¼š
ç¡®è®¤å·²å®‰è£…SSD1306åº“ï¼š
```bash
cd components
git clone https://github.com/nopnop2002/esp-idf-ssd1306.git ssd1306
```

### é—®é¢˜4ï¼šç¼–è¯‘é”™è¯¯ "ssd1306.h: No such file"

**è§£å†³æ–¹æ¡ˆ**ï¼š

**æ–¹æ³•1**ï¼šä½¿ç”¨ESP-IDFç»„ä»¶ç®¡ç†å™¨
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º idf_component.yml
echo "dependencies:
  ssd1306:
    git: https://github.com/nopnop2002/esp-idf-ssd1306.git" > idf_component.yml

idf.py reconfigure
```

**æ–¹æ³•2**ï¼šæ‰‹åŠ¨ä¸‹è½½åº“
```bash
cd components
git clone https://github.com/nopnop2002/esp-idf-ssd1306.git ssd1306
```

### é—®é¢˜5ï¼šçƒ§å½•å¤±è´¥ "Failed to connect"

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æŒ‰ä½BOOTé”®ï¼Œç„¶åæŒ‰RESETé”®ï¼Œå†æ¾å¼€BOOTé”®ï¼ˆè¿›å…¥ä¸‹è½½æ¨¡å¼ï¼‰

# 2. ä½¿ç”¨æ›´ä½çš„æ³¢ç‰¹ç‡
idf.py -p COM3 -b 115200 flash

# 3. æ“¦é™¤Flashé‡è¯•
idf.py -p COM3 erase-flash
idf.py -p COM3 flash
```

---

## ğŸ“š ä»£ç è¯´æ˜

### ä¸»è¦å‡½æ•°

```c
// 1. I2Cåˆå§‹åŒ–
esp_err_t i2c_master_init(void);

// 2. OLEDåˆå§‹åŒ–
void ssd1306_init(SSD1306_t *dev, int width, int height, 
                  int address, i2c_port_t port, 
                  gpio_num_t sda, gpio_num_t scl);

// 3. æ˜¾ç¤ºæ–‡å­—
void ssd1306_display_text(SSD1306_t *dev, int page, char *text, int length, bool invert);

// 4. æ¸…å±
void ssd1306_clear_screen(SSD1306_t *dev, bool invert);

// 5. ç»˜åˆ¶çº¿æ¡
void ssd1306_draw_line(SSD1306_t *dev, int x1, int y1, int x2, int y2);

// 6. ç»˜åˆ¶çŸ©å½¢
void ssd1306_draw_rectangle(SSD1306_t *dev, int x, int y, int width, int height);

// 7. ç»˜åˆ¶åœ†å½¢
void ssd1306_draw_circle(SSD1306_t *dev, int x, int y, int radius);
```

### ä¿®æ”¹æ˜¾ç¤ºå†…å®¹

åœ¨ `main.c` ä¸­æ‰¾åˆ°å¯¹åº”å‡½æ•°ä¿®æ”¹ï¼š

```c
void display_welcome(SSD1306_t *dev) {
    ssd1306_clear_screen(dev, false);
    
    // ä¿®æ”¹æ˜¾ç¤ºæ–‡å­—
    ssd1306_display_text(dev, 0, "Your Text Here", 14, false);
    ssd1306_display_text(dev, 2, "Line 2", 6, false);
    // ...
}
```

---

## âœ… æµ‹è¯•å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] ä¸²å£è¾“å‡ºæ— é”™è¯¯ä¿¡æ¯
- [ ] OLEDæ­£å¸¸æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
- [ ] ç³»ç»Ÿä¿¡æ¯æ˜¾ç¤ºæ­£ç¡®
- [ ] å›¾å½¢ç»˜åˆ¶æ­£å¸¸
- [ ] æ»šåŠ¨åŠ¨ç”»æµç•…
- [ ] å¤šæ¬¡ä¸Šç”µå‡èƒ½æ­£å¸¸å·¥ä½œ

**âœ… æµ‹è¯•é€šè¿‡åï¼Œå¯ä»¥ç»§ç»­ä¸‹ä¸€ä¸ªæ¨¡å—ï¼š[RFID RC522æµ‹è¯•](../02_RFID_RC522_Test/README.md)**

---

## ğŸ”— ç›¸å…³èµ„æº

- **SSD1306æ•°æ®æ‰‹å†Œ**ï¼šhttps://cdn-shop.adafruit.com/datasheets/SSD1306.pdf
- **ESP-IDF I2Cæ–‡æ¡£**ï¼šhttps://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/i2c.html
- **SSD1306åº“GitHub**ï¼šhttps://github.com/nopnop2002/esp-idf-ssd1306

---

**æµ‹è¯•æ„‰å¿«ï¼é‡åˆ°é—®é¢˜è¯·å‚è€ƒæ•…éšœæ’æŸ¥éƒ¨åˆ†ã€‚ğŸ“º**
